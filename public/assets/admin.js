!function(t){t.color={},t.color.make=function(e,i,n,o){var a={};return a.r=e||0,a.g=i||0,a.b=n||0,a.a=null!=o?o:1,a.add=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]+=e;return a.normalize()},a.scale=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]*=e;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,e,i){return t>e?t:e>i?i:e}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(e,i){var n;do{if(n=e.css(i).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,o=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return o(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return o(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var a=t.trim(i).toLowerCase();return"transparent"==a?o(255,255,255,0):(n=e[a]||[0,0,0],o(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,o,a,r){function l(t,e){e=[ke].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function s(){for(var e=0;e<r.length;++e){var i=r[e];i.init(ke),i.options&&t.extend(!0,re,i.options)}}function c(e){var i;for(t.extend(!0,re,e),null==re.xaxis.color&&(re.xaxis.color=re.grid.color),null==re.yaxis.color&&(re.yaxis.color=re.grid.color),null==re.xaxis.tickColor&&(re.xaxis.tickColor=re.grid.tickColor),null==re.yaxis.tickColor&&(re.yaxis.tickColor=re.grid.tickColor),null==re.grid.borderColor&&(re.grid.borderColor=re.grid.color),null==re.grid.tickColor&&(re.grid.tickColor=t.color.parse(re.grid.color).scale("a",.22).toString()),i=0;i<Math.max(1,re.xaxes.length);++i)re.xaxes[i]=t.extend(!0,{},re.xaxis,re.xaxes[i]);for(i=0;i<Math.max(1,re.yaxes.length);++i)re.yaxes[i]=t.extend(!0,{},re.yaxis,re.yaxes[i]);for(re.xaxis.noTicks&&null==re.xaxis.ticks&&(re.xaxis.ticks=re.xaxis.noTicks),re.yaxis.noTicks&&null==re.yaxis.ticks&&(re.yaxis.ticks=re.yaxis.noTicks),re.x2axis&&(re.xaxes[1]=t.extend(!0,{},re.xaxis,re.x2axis),re.xaxes[1].position="top"),re.y2axis&&(re.yaxes[1]=t.extend(!0,{},re.yaxis,re.y2axis),re.yaxes[1].position="right"),re.grid.coloredAreas&&(re.grid.markings=re.grid.coloredAreas),re.grid.coloredAreasColor&&(re.grid.markingsColor=re.grid.coloredAreasColor),re.lines&&t.extend(!0,re.series.lines,re.lines),re.points&&t.extend(!0,re.series.points,re.points),re.bars&&t.extend(!0,re.series.bars,re.bars),null!=re.shadowSize&&(re.series.shadowSize=re.shadowSize),i=0;i<re.xaxes.length;++i)m(pe,i+1).options=re.xaxes[i];for(i=0;i<re.yaxes.length;++i)m(fe,i+1).options=re.yaxes[i];for(var n in be)re.hooks[n]&&re.hooks[n].length&&(be[n]=be[n].concat(re.hooks[n]));l(be.processOptions,[re])}function d(t){ae=u(t),v(),x()}function u(e){for(var i=[],n=0;n<e.length;++n){var o=t.extend(!0,{},re.series);null!=e[n].data?(o.data=e[n].data,delete e[n].data,t.extend(!0,o,e[n]),e[n].data=o.data):o.data=e[n],i.push(o)}return i}function p(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function f(){return t.grep(pe.concat(fe),function(t){return t})}function h(t){var e,i,n={};for(e=0;e<pe.length;++e)i=pe[e],i&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<fe.length;++e)i=fe[e],i&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function g(t){var e,i,n,o={};for(e=0;e<pe.length;++e)if(i=pe[e],i&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){o.left=i.p2c(t[n]);break}for(e=0;e<fe.length;++e)if(i=fe[e],i&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){o.top=i.p2c(t[n]);break}return o}function m(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==pe?"x":"y",options:t.extend(!0,{},e==pe?re.xaxis:re.yaxis)}),e[i-1]}function v(){var e,i=ae.length,n=[],o=[];for(e=0;e<ae.length;++e){var a=ae[e].color;null!=a&&(--i,"number"==typeof a?o.push(a):n.push(t.color.parse(ae[e].color)))}for(e=0;e<o.length;++e)i=Math.max(i,o[e]+1);var r=[],l=0;for(e=0;r.length<i;){var s;s=re.colors.length==e?t.color.make(100,100,100):t.color.parse(re.colors[e]);var c=l%2==1?-1:1;s.scale("rgb",1+c*Math.ceil(l/2)*.2),r.push(s),++e,e>=re.colors.length&&(e=0,++l)}var d,u=0;for(e=0;e<ae.length;++e){if(d=ae[e],null==d.color?(d.color=r[u].toString(),++u):"number"==typeof d.color&&(d.color=r[d.color].toString()),null==d.lines.show){var f,h=!0;for(f in d)if(d[f]&&d[f].show){h=!1;break}h&&(d.lines.show=!0)}d.xaxis=m(pe,p(d,"x")),d.yaxis=m(fe,p(d,"y"))}}function x(){function e(t,e,i){e<t.datamin&&e!=-m&&(t.datamin=e),i>t.datamax&&i!=m&&(t.datamax=i)}var i,n,o,a,r,s,c,d,u,p,h=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=Number.MAX_VALUE;for(t.each(f(),function(t,e){e.datamin=h,e.datamax=g,e.used=!1}),i=0;i<ae.length;++i)r=ae[i],r.datapoints={points:[]},l(be.processRawData,[r,r.data,r.datapoints]);for(i=0;i<ae.length;++i){r=ae[i];var v=r.data,x=r.datapoints.format;if(x||(x=[],x.push({x:!0,number:!0,required:!0}),x.push({y:!0,number:!0,required:!0}),(r.bars.show||r.lines.show&&r.lines.fill)&&(x.push({y:!0,number:!0,required:!1,defaultValue:0}),r.bars.horizontal&&(delete x[x.length-1].y,x[x.length-1].x=!0)),r.datapoints.format=x),null==r.datapoints.pointsize)for(r.datapoints.pointsize=x.length,c=r.datapoints.pointsize,s=r.datapoints.points,insertSteps=r.lines.show&&r.lines.steps,r.xaxis.used=r.yaxis.used=!0,n=o=0;n<v.length;++n,o+=c){p=v[n];var b=null==p;if(!b)for(a=0;c>a;++a)d=p[a],u=x[a],u&&(u.number&&null!=d&&(d=+d,isNaN(d)?d=null:1/0==d?d=m:d==-1/0&&(d=-m)),null==d&&(u.required&&(b=!0),null!=u.defaultValue&&(d=u.defaultValue))),s[o+a]=d;if(b)for(a=0;c>a;++a)d=s[o+a],null!=d&&(u=x[a],u.x&&e(r.xaxis,d,d),u.y&&e(r.yaxis,d,d)),s[o+a]=null;else if(insertSteps&&o>0&&null!=s[o-c]&&s[o-c]!=s[o]&&s[o-c+1]!=s[o+1]){for(a=0;c>a;++a)s[o+c+a]=s[o+a];s[o+1]=s[o-c+1],o+=c}}}for(i=0;i<ae.length;++i)r=ae[i],l(be.processDatapoints,[r,r.datapoints]);for(i=0;i<ae.length;++i){r=ae[i],s=r.datapoints.points,c=r.datapoints.pointsize;var k=h,y=h,w=g,M=g;for(n=0;n<s.length;n+=c)if(null!=s[n])for(a=0;c>a;++a)d=s[n+a],u=x[a],u&&d!=m&&d!=-m&&(u.x&&(k>d&&(k=d),d>w&&(w=d)),u.y&&(y>d&&(y=d),d>M&&(M=d)));if(r.bars.show){var T="left"==r.bars.align?0:-r.bars.barWidth/2;r.bars.horizontal?(y+=T,M+=T+r.bars.barWidth):(k+=T,w+=T+r.bars.barWidth)}e(r.xaxis,k,w),e(r.yaxis,y,M)}t.each(f(),function(t,e){e.datamin==h&&(e.datamin=null),e.datamax==g&&(e.datamax=null)})}function b(i,n){var o=document.createElement("canvas");return o.className=n,o.width=ge,o.height=me,i||t(o).css({position:"absolute",left:0,top:0}),t(o).appendTo(e),o.getContext||(o=window.G_vmlCanvasManager.initElement(o)),o.getContext("2d").save(),o}function k(){if(ge=e.width(),me=e.height(),0>=ge||0>=me)throw"Invalid dimensions for plot, width = "+ge+", height = "+me}function y(t){t.width!=ge&&(t.width=ge),t.height!=me&&(t.height=me);var e=t.getContext("2d");e.restore(),e.save()}function w(){var i,n=e.children("canvas.base"),o=e.children("canvas.overlay");0==n.length||0==o?(e.html(""),e.css({padding:0}),"static"==e.css("position")&&e.css("position","relative"),k(),le=b(!0,"base"),se=b(!1,"overlay"),i=!1):(le=n.get(0),se=o.get(0),i=!0),de=le.getContext("2d"),ue=se.getContext("2d"),ce=t([se,le]),i&&(e.data("plot").shutdown(),ke.resize(),ue.clearRect(0,0,ge,me),ce.unbind(),e.children().not([le,se]).remove()),e.data("plot",ke)}function M(){re.grid.hoverable&&(ce.mousemove(V),ce.mouseleave(G)),re.grid.clickable&&ce.click(Q),l(be.bindEvents,[ce])}function T(){we&&clearTimeout(we),ce.unbind("mousemove",V),ce.unbind("mouseleave",G),ce.unbind("click",Q),l(be.shutdown,[ce])}function C(t){function e(t){return t}var i,n,o=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(i=t.scale=ve/Math.abs(o(t.max)-o(t.min)),n=Math.min(o(t.max),o(t.min))):(i=t.scale=xe/Math.abs(o(t.max)-o(t.min)),i=-i,n=Math.max(o(t.max),o(t.min))),t.p2c=o==e?function(t){return(t-n)*i}:function(t){return(o(t)-n)*i},t.c2p=a?function(t){return a(n+t/i)}:function(t){return n+t/i}}function S(i){function n(n,o){return t('<div style="position:absolute;top:-10000px;'+o+'font-size:smaller"><div class="'+i.direction+"Axis "+i.direction+i.n+'Axis">'+n.join("")+"</div></div>").appendTo(e)}var o,a,r,l=i.options,s=i.ticks||[],c=[],d=l.labelWidth,u=l.labelHeight;if("x"==i.direction){if(null==d&&(d=Math.floor(ge/(s.length>0?s.length:1))),null==u){for(c=[],o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel" style="float:left;width:'+d+'px">'+a+"</div>");c.length>0&&(c.push('<div style="clear:left"></div>'),r=n(c,"width:10000px;"),u=r.height(),r.remove())}}else if(null==d||null==u){for(o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel">'+a+"</div>");c.length>0&&(r=n(c,""),null==d&&(d=r.children().width()),null==u&&(u=r.find("div.tickLabel").height()),r.remove())}null==d&&(d=0),null==u&&(u=0),i.labelWidth=d,i.labelHeight=u}function I(e){var i=e.labelWidth,n=e.labelHeight,o=e.options.position,a=e.options.tickLength,r=re.grid.axisMargin,l=re.grid.labelMargin,s="x"==e.direction?pe:fe,c=t.grep(s,function(t){return t&&t.options.position==o&&t.reserveSpace});t.inArray(e,c)==c.length-1&&(r=0),null==a&&(a="full");var d=t.grep(s,function(t){return t&&t.reserveSpace}),u=0==t.inArray(e,d);u||"full"!=a||(a=5),isNaN(+a)||(l+=+a),"x"==e.direction?(n+=l,"bottom"==o?(he.bottom+=n+r,e.box={top:me-he.bottom,height:n}):(e.box={top:he.top+r,height:n},he.top+=n+r)):(i+=l,"left"==o?(e.box={left:he.left+r,width:i},he.left+=i+r):(he.right+=i+r,e.box={left:ge-he.right,width:i})),e.position=o,e.tickLength=a,e.box.padding=l,e.innermost=u}function A(t){"x"==t.direction?(t.box.left=he.left,t.box.width=ve):(t.box.top=he.top,t.box.height=xe)}function P(){var e,i=f();if(t.each(i,function(t,e){e.show=e.options.show,null==e.show&&(e.show=e.used),e.reserveSpace=e.show||e.options.reserveSpace,z(e)}),allocatedAxes=t.grep(i,function(t){return t.reserveSpace}),he.left=he.right=he.top=he.bottom=0,re.grid.show){for(t.each(allocatedAxes,function(t,e){_(e),O(e),W(e,e.ticks),S(e)}),e=allocatedAxes.length-1;e>=0;--e)I(allocatedAxes[e]);var n=re.grid.minBorderMargin;if(null==n)for(n=0,e=0;e<ae.length;++e)n=Math.max(n,ae[e].points.radius+ae[e].points.lineWidth/2);for(var o in he)he[o]+=re.grid.borderWidth,he[o]=Math.max(n,he[o])}ve=ge-he.left-he.right,xe=me-he.bottom-he.top,t.each(i,function(t,e){C(e)}),re.grid.show&&(t.each(allocatedAxes,function(t,e){A(e)}),D()),j()}function z(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),o=n-i;if(0==o){var a=0==n?1:.01;null==e.min&&(i-=a),(null==e.max||null!=e.min)&&(n+=a)}else{var r=e.autoscaleMargin;null!=r&&(null==e.min&&(i-=o*r,0>i&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(n+=o*r,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=i,t.max=n}function _(e){var i,o=e.options;i="number"==typeof o.ticks&&o.ticks>0?o.ticks:.3*Math.sqrt("x"==e.direction?ge:me);var a,r,l,s,c,d,u,p=(e.max-e.min)/i;if("time"==o.mode){var f={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},h=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],g=0;null!=o.minTickSize&&(g="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*f[o.minTickSize[1]]);for(var c=0;c<h.length-1&&!(p<(h[c][0]*f[h[c][1]]+h[c+1][0]*f[h[c+1][1]])/2&&h[c][0]*f[h[c][1]]>=g);++c);a=h[c][0],l=h[c][1],"year"==l&&(d=Math.pow(10,Math.floor(Math.log(p/f.year)/Math.LN10)),u=p/f.year/d,a=1.5>u?1:3>u?2:7.5>u?5:10,a*=d),e.tickSize=o.tickSize||[a,l],r=function(t){var e=[],i=t.tickSize[0],o=t.tickSize[1],a=new Date(t.min),r=i*f[o];"second"==o&&a.setUTCSeconds(n(a.getUTCSeconds(),i)),"minute"==o&&a.setUTCMinutes(n(a.getUTCMinutes(),i)),"hour"==o&&a.setUTCHours(n(a.getUTCHours(),i)),"month"==o&&a.setUTCMonth(n(a.getUTCMonth(),i)),"year"==o&&a.setUTCFullYear(n(a.getUTCFullYear(),i)),a.setUTCMilliseconds(0),r>=f.minute&&a.setUTCSeconds(0),r>=f.hour&&a.setUTCMinutes(0),r>=f.day&&a.setUTCHours(0),r>=4*f.day&&a.setUTCDate(1),r>=f.year&&a.setUTCMonth(0);var l,s=0,c=Number.NaN;do if(l=c,c=a.getTime(),e.push(c),"month"==o)if(1>i){a.setUTCDate(1);var d=a.getTime();a.setUTCMonth(a.getUTCMonth()+1);var u=a.getTime();a.setTime(c+s*f.hour+(u-d)*i),s=a.getUTCHours(),a.setUTCHours(0)}else a.setUTCMonth(a.getUTCMonth()+i);else"year"==o?a.setUTCFullYear(a.getUTCFullYear()+i):a.setTime(c+r);while(c<t.max&&c!=l);return e},s=function(e,i){var n=new Date(e);if(null!=o.timeformat)return t.plot.formatDate(n,o.timeformat,o.monthNames);var a=i.tickSize[0]*f[i.tickSize[1]],r=i.max-i.min,l=o.twelveHourClock?" %p":"";return fmt=a<f.minute?"%h:%M:%S"+l:a<f.day?r<2*f.day?"%h:%M"+l:"%b %d %h:%M"+l:a<f.month?"%b %d":a<f.year?r<f.year?"%b":"%b %y":"%y",t.plot.formatDate(n,fmt,o.monthNames)}}else{var m=o.tickDecimals,v=-Math.floor(Math.log(p)/Math.LN10);null!=m&&v>m&&(v=m),d=Math.pow(10,-v),u=p/d,1.5>u?a=1:3>u?(a=2,u>2.25&&(null==m||m>=v+1)&&(a=2.5,++v)):a=7.5>u?5:10,a*=d,null!=o.minTickSize&&a<o.minTickSize&&(a=o.minTickSize),e.tickDecimals=Math.max(0,null!=m?m:v),e.tickSize=o.tickSize||a,r=function(t){var e,i=[],o=n(t.min,t.tickSize),a=0,r=Number.NaN;do e=r,r=o+a*t.tickSize,i.push(r),++a;while(r<t.max&&r!=e);return i},s=function(t,e){return t.toFixed(e.tickDecimals)}}if(null!=o.alignTicksWithAxis){var x=("x"==e.direction?pe:fe)[o.alignTicksWithAxis-1];if(x&&x.used&&x!=e){var b=r(e);if(b.length>0&&(null==o.min&&(e.min=Math.min(e.min,b[0])),null==o.max&&b.length>1&&(e.max=Math.max(e.max,b[b.length-1]))),r=function(t){var e,i,n=[];for(i=0;i<x.ticks.length;++i)e=(x.ticks[i].v-x.min)/(x.max-x.min),e=t.min+e*(t.max-t.min),n.push(e);return n},"time"!=e.mode&&null==o.tickDecimals){var k=Math.max(0,-Math.floor(Math.log(p)/Math.LN10)+1),y=r(e);y.length>1&&/\..*0$/.test((y[1]-y[0]).toFixed(k))||(e.tickDecimals=k)}}}e.tickGenerator=r,e.tickFormatter=t.isFunction(o.tickFormatter)?function(t,e){return""+o.tickFormatter(t,e)}:s}function O(e){var i=e.options.ticks,n=[];null==i||"number"==typeof i&&i>0?n=e.tickGenerator(e):i&&(n=t.isFunction(i)?i({min:e.min,max:e.max}):i);var o,a;for(e.ticks=[],o=0;o<n.length;++o){var r=null,l=n[o];"object"==typeof l?(a=+l[0],l.length>1&&(r=l[1])):a=+l,null==r&&(r=e.tickFormatter(a,e)),isNaN(a)||e.ticks.push({v:a,label:r})}}function W(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function N(){de.clearRect(0,0,ge,me);var t=re.grid;t.show&&t.backgroundColor&&L(),t.show&&!t.aboveData&&H();for(var e=0;e<ae.length;++e)l(be.drawSeries,[de,ae[e]]),U(ae[e]);l(be.draw,[de]),t.show&&t.aboveData&&H()}function F(t,e){var n,o,a,r,l=f();for(i=0;i<l.length;++i)if(n=l[i],n.direction==e&&(r=e+n.n+"axis",t[r]||1!=n.n||(r=e+"axis"),t[r])){o=t[r].from,a=t[r].to;break}if(t[r]||(n="x"==e?pe[0]:fe[0],o=t[e+"1"],a=t[e+"2"]),null!=o&&null!=a&&o>a){var s=o;o=a,a=s}return{from:o,to:a,axis:n}}function L(){de.save(),de.translate(he.left,he.top),de.fillStyle=oe(re.grid.backgroundColor,xe,0,"rgba(255, 255, 255, 0)"),de.fillRect(0,0,ve,xe),de.restore()}function H(){var e;de.save(),de.translate(he.left,he.top);var i=re.grid.markings;if(i){if(t.isFunction(i)){var n=ke.getAxes();n.xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)}for(e=0;e<i.length;++e){var o=i[e],a=F(o,"x"),r=F(o,"y");null==a.from&&(a.from=a.axis.min),null==a.to&&(a.to=a.axis.max),null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),a.to<a.axis.min||a.from>a.axis.max||r.to<r.axis.min||r.from>r.axis.max||(a.from=Math.max(a.from,a.axis.min),a.to=Math.min(a.to,a.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),(a.from!=a.to||r.from!=r.to)&&(a.from=a.axis.p2c(a.from),a.to=a.axis.p2c(a.to),r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),a.from==a.to||r.from==r.to?(de.beginPath(),de.strokeStyle=o.color||re.grid.markingsColor,de.lineWidth=o.lineWidth||re.grid.markingsLineWidth,de.moveTo(a.from,r.from),de.lineTo(a.to,r.to),de.stroke()):(de.fillStyle=o.color||re.grid.markingsColor,de.fillRect(a.from,r.to,a.to-a.from,r.from-r.to))))}}for(var n=f(),l=re.grid.borderWidth,s=0;s<n.length;++s){var c,d,u,p,h=n[s],g=h.box,m=h.tickLength;if(h.show&&0!=h.ticks.length){for(de.strokeStyle=h.options.tickColor||t.color.parse(h.options.color).scale("a",.22).toString(),de.lineWidth=1,"x"==h.direction?(c=0,d="full"==m?"top"==h.position?0:xe:g.top-he.top+("top"==h.position?g.height:0)):(d=0,c="full"==m?"left"==h.position?0:ve:g.left-he.left+("left"==h.position?g.width:0)),h.innermost||(de.beginPath(),u=p=0,"x"==h.direction?u=ve:p=xe,1==de.lineWidth&&(c=Math.floor(c)+.5,d=Math.floor(d)+.5),de.moveTo(c,d),de.lineTo(c+u,d+p),de.stroke()),de.beginPath(),e=0;e<h.ticks.length;++e){var v=h.ticks[e].v;u=p=0,v<h.min||v>h.max||"full"==m&&l>0&&(v==h.min||v==h.max)||("x"==h.direction?(c=h.p2c(v),p="full"==m?-xe:m,"top"==h.position&&(p=-p)):(d=h.p2c(v),u="full"==m?-ve:m,"left"==h.position&&(u=-u)),1==de.lineWidth&&("x"==h.direction?c=Math.floor(c)+.5:d=Math.floor(d)+.5),de.moveTo(c,d),de.lineTo(c+u,d+p))}de.stroke()}}l&&(de.lineWidth=l,de.strokeStyle=re.grid.borderColor,de.strokeRect(-l/2,-l/2,ve+l,xe+l)),de.restore()}function D(){e.find(".tickLabels").remove();for(var t=['<div class="tickLabels" style="font-size:smaller">'],i=f(),n=0;n<i.length;++n){var o=i[n],a=o.box;if(o.show){t.push('<div class="'+o.direction+"Axis "+o.direction+o.n+'Axis" style="color:'+o.options.color+'">');for(var r=0;r<o.ticks.length;++r){var l=o.ticks[r];if(!(!l.label||l.v<o.min||l.v>o.max)){var s,c={};"x"==o.direction?(s="center",c.left=Math.round(he.left+o.p2c(l.v)-o.labelWidth/2),"bottom"==o.position?c.top=a.top+a.padding:c.bottom=me-(a.top+a.height-a.padding)):(c.top=Math.round(he.top+o.p2c(l.v)-o.labelHeight/2),"left"==o.position?(c.right=ge-(a.left+a.width-a.padding),s="right"):(c.left=a.left+a.padding,s="left")),c.width=o.labelWidth;var d=["position:absolute","text-align:"+s];for(var u in c)d.push(u+":"+c[u]+"px");t.push('<div class="tickLabel" style="'+d.join(";")+'">'+l.label+"</div>")}}t.push("</div>")}}t.push("</div>"),e.append(t.join(""))}function U(t){t.lines.show&&R(t),t.bars.show&&q(t),t.points.show&&Y(t)}function R(t){function e(t,e,i,n,o){var a=t.points,r=t.pointsize,l=null,s=null;de.beginPath();for(var c=r;c<a.length;c+=r){var d=a[c-r],u=a[c-r+1],p=a[c],f=a[c+1];if(null!=d&&null!=p){if(f>=u&&u<o.min){if(f<o.min)continue;d=(o.min-u)/(f-u)*(p-d)+d,u=o.min}else if(u>=f&&f<o.min){if(u<o.min)continue;p=(o.min-u)/(f-u)*(p-d)+d,f=o.min}if(u>=f&&u>o.max){if(f>o.max)continue;d=(o.max-u)/(f-u)*(p-d)+d,u=o.max}else if(f>=u&&f>o.max){if(u>o.max)continue;p=(o.max-u)/(f-u)*(p-d)+d,f=o.max}if(p>=d&&d<n.min){if(p<n.min)continue;u=(n.min-d)/(p-d)*(f-u)+u,d=n.min}else if(d>=p&&p<n.min){if(d<n.min)continue;f=(n.min-d)/(p-d)*(f-u)+u,p=n.min}if(d>=p&&d>n.max){if(p>n.max)continue;u=(n.max-d)/(p-d)*(f-u)+u,d=n.max}else if(p>=d&&p>n.max){if(d>n.max)continue;f=(n.max-d)/(p-d)*(f-u)+u,p=n.max}(d!=l||u!=s)&&de.moveTo(n.p2c(d)+e,o.p2c(u)+i),l=p,s=f,de.lineTo(n.p2c(p)+e,o.p2c(f)+i)}}de.stroke()}function i(t,e,i){for(var n=t.points,o=t.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,l=!1,s=1,c=0,d=0;;){if(o>0&&r>n.length+o)break;r+=o;var u=n[r-o],p=n[r-o+s],f=n[r],h=n[r+s];if(l){if(o>0&&null!=u&&null==f){d=r,o=-o,s=2;continue}if(0>o&&r==c+o){de.fill(),l=!1,o=-o,s=1,r=c=d+o;continue}}if(null!=u&&null!=f){if(f>=u&&u<e.min){if(f<e.min)continue;p=(e.min-u)/(f-u)*(h-p)+p,u=e.min}else if(u>=f&&f<e.min){if(u<e.min)continue;h=(e.min-u)/(f-u)*(h-p)+p,f=e.min}if(u>=f&&u>e.max){if(f>e.max)continue;p=(e.max-u)/(f-u)*(h-p)+p,u=e.max}else if(f>=u&&f>e.max){if(u>e.max)continue;h=(e.max-u)/(f-u)*(h-p)+p,f=e.max}if(l||(de.beginPath(),de.moveTo(e.p2c(u),i.p2c(a)),l=!0),p>=i.max&&h>=i.max)de.lineTo(e.p2c(u),i.p2c(i.max)),de.lineTo(e.p2c(f),i.p2c(i.max));else if(p<=i.min&&h<=i.min)de.lineTo(e.p2c(u),i.p2c(i.min)),de.lineTo(e.p2c(f),i.p2c(i.min));else{var g=u,m=f;h>=p&&p<i.min&&h>=i.min?(u=(i.min-p)/(h-p)*(f-u)+u,p=i.min):p>=h&&h<i.min&&p>=i.min&&(f=(i.min-p)/(h-p)*(f-u)+u,h=i.min),p>=h&&p>i.max&&h<=i.max?(u=(i.max-p)/(h-p)*(f-u)+u,p=i.max):h>=p&&h>i.max&&p<=i.max&&(f=(i.max-p)/(h-p)*(f-u)+u,h=i.max),u!=g&&de.lineTo(e.p2c(g),i.p2c(p)),de.lineTo(e.p2c(u),i.p2c(p)),de.lineTo(e.p2c(f),i.p2c(h)),f!=m&&(de.lineTo(e.p2c(f),i.p2c(h)),de.lineTo(e.p2c(m),i.p2c(h)))}}}}de.save(),de.translate(he.left,he.top),de.lineJoin="round";var n=t.lines.lineWidth,o=t.shadowSize;if(n>0&&o>0){de.lineWidth=o,de.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;e(t.datapoints,Math.sin(a)*(n/2+o/2),Math.cos(a)*(n/2+o/2),t.xaxis,t.yaxis),de.lineWidth=o/2,e(t.datapoints,Math.sin(a)*(n/2+o/4),Math.cos(a)*(n/2+o/4),t.xaxis,t.yaxis)}de.lineWidth=n,de.strokeStyle=t.color;var r=E(t.lines,t.color,0,xe);r&&(de.fillStyle=r,i(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),de.restore()}function Y(t){function e(t,e,i,n,o,a,r,l){for(var s=t.points,c=t.pointsize,d=0;d<s.length;d+=c){var u=s[d],p=s[d+1];null==u||u<a.min||u>a.max||p<r.min||p>r.max||(de.beginPath(),u=a.p2c(u),p=r.p2c(p)+n,"circle"==l?de.arc(u,p,e,0,o?Math.PI:2*Math.PI,!1):l(de,u,p,e,o),de.closePath(),i&&(de.fillStyle=i,de.fill()),de.stroke())}}de.save(),de.translate(he.left,he.top);var i=t.points.lineWidth,n=t.shadowSize,o=t.points.radius,a=t.points.symbol;if(i>0&&n>0){var r=n/2;de.lineWidth=r,de.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,o,null,r+r/2,!0,t.xaxis,t.yaxis,a),de.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,o,null,r/2,!0,t.xaxis,t.yaxis,a)}de.lineWidth=i,de.strokeStyle=t.color,e(t.datapoints,o,E(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),de.restore()}function X(t,e,i,n,o,a,r,l,s,c,d,u){var p,f,h,g,m,v,x,b,k;d?(b=v=x=!0,m=!1,p=i,f=t,g=e+n,h=e+o,p>f&&(k=f,f=p,p=k,m=!0,v=!1)):(m=v=x=!0,b=!1,p=t+n,f=t+o,h=i,g=e,h>g&&(k=g,g=h,h=k,b=!0,x=!1)),f<l.min||p>l.max||g<s.min||h>s.max||(p<l.min&&(p=l.min,m=!1),f>l.max&&(f=l.max,v=!1),h<s.min&&(h=s.min,b=!1),g>s.max&&(g=s.max,x=!1),p=l.p2c(p),h=s.p2c(h),f=l.p2c(f),g=s.p2c(g),r&&(c.beginPath(),c.moveTo(p,h),c.lineTo(p,g),c.lineTo(f,g),c.lineTo(f,h),c.fillStyle=r(h,g),c.fill()),u>0&&(m||v||x||b)&&(c.beginPath(),c.moveTo(p,h+a),m?c.lineTo(p,g+a):c.moveTo(p,g+a),x?c.lineTo(f,g+a):c.moveTo(f,g+a),v?c.lineTo(f,h+a):c.moveTo(f,h+a),b?c.lineTo(p,h+a):c.moveTo(p,h+a),c.stroke()))}function q(t){function e(e,i,n,o,a,r,l){for(var s=e.points,c=e.pointsize,d=0;d<s.length;d+=c)null!=s[d]&&X(s[d],s[d+1],s[d+2],i,n,o,a,r,l,de,t.bars.horizontal,t.bars.lineWidth)}de.save(),de.translate(he.left,he.top),de.lineWidth=t.bars.lineWidth,de.strokeStyle=t.color;var i="left"==t.bars.align?0:-t.bars.barWidth/2,n=t.bars.fill?function(e,i){return E(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,0,n,t.xaxis,t.yaxis),de.restore()}function E(e,i,n,o){var a=e.fill;if(!a)return null;if(e.fillColor)return oe(e.fillColor,n,o,i);var r=t.color.parse(i);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function j(){if(e.find(".legend").remove(),re.legend.show){for(var i,n,o=[],a=!1,r=re.legend.labelFormatter,l=0;l<ae.length;++l)i=ae[l],n=i.label,n&&(l%re.legend.noColumns==0&&(a&&o.push("</tr>"),o.push("<tr>"),a=!0),r&&(n=r(n,i)),o.push('<td class="legendColorBox"><div style="border:1px solid '+re.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+i.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+n+"</td>"));if(a&&o.push("</tr>"),0!=o.length){var s='<table style="font-size:smaller;color:'+re.grid.color+'">'+o.join("")+"</table>";if(null!=re.legend.container)t(re.legend.container).html(s);else{var c="",d=re.legend.position,u=re.legend.margin;null==u[0]&&(u=[u,u]),"n"==d.charAt(0)?c+="top:"+(u[1]+he.top)+"px;":"s"==d.charAt(0)&&(c+="bottom:"+(u[1]+he.bottom)+"px;"),"e"==d.charAt(1)?c+="right:"+(u[0]+he.right)+"px;":"w"==d.charAt(1)&&(c+="left:"+(u[0]+he.left)+"px;");var p=t('<div class="legend">'+s.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(e);if(0!=re.legend.backgroundOpacity){var f=re.legend.backgroundColor;null==f&&(f=re.grid.backgroundColor,f=f&&"string"==typeof f?t.color.parse(f):t.color.extract(p,"background-color"),f.a=1,f=f.toString());var h=p.children();t('<div style="position:absolute;width:'+h.width()+"px;height:"+h.height()+"px;"+c+"background-color:"+f+';"> </div>').prependTo(p).css("opacity",re.legend.backgroundOpacity)}}}}}function B(t,e,i){var n,o,a=re.grid.mouseActiveRadius,r=a*a+1,l=null;for(n=ae.length-1;n>=0;--n)if(i(ae[n])){var s=ae[n],c=s.xaxis,d=s.yaxis,u=s.datapoints.points,p=s.datapoints.pointsize,f=c.c2p(t),h=d.c2p(e),g=a/c.scale,m=a/d.scale;if(c.options.inverseTransform&&(g=Number.MAX_VALUE),d.options.inverseTransform&&(m=Number.MAX_VALUE),s.lines.show||s.points.show)for(o=0;o<u.length;o+=p){var v=u[o],x=u[o+1];if(null!=v&&!(v-f>g||-g>v-f||x-h>m||-m>x-h)){var b=Math.abs(c.p2c(v)-t),k=Math.abs(d.p2c(x)-e),y=b*b+k*k;r>y&&(r=y,l=[n,o/p])}}if(s.bars.show&&!l){var w="left"==s.bars.align?0:-s.bars.barWidth/2,M=w+s.bars.barWidth;for(o=0;o<u.length;o+=p){var v=u[o],x=u[o+1],T=u[o+2];null!=v&&(ae[n].bars.horizontal?f<=Math.max(T,v)&&f>=Math.min(T,v)&&h>=x+w&&x+M>=h:f>=v+w&&v+M>=f&&h>=Math.min(T,x)&&h<=Math.max(T,x))&&(l=[n,o/p])}}}return l?(n=l[0],o=l[1],p=ae[n].datapoints.pointsize,{datapoint:ae[n].datapoints.points.slice(o*p,(o+1)*p),dataIndex:o,series:ae[n],seriesIndex:n}):null}function V(t){re.grid.hoverable&&J("plothover",t,function(t){return 0!=t.hoverable})}function G(t){re.grid.hoverable&&J("plothover",t,function(){return!1})}function Q(t){J("plotclick",t,function(t){return 0!=t.clickable})}function J(t,i,n){var o=ce.offset(),a=i.pageX-o.left-he.left,r=i.pageY-o.top-he.top,l=h({left:a,top:r});l.pageX=i.pageX,l.pageY=i.pageY;var s=B(a,r,n);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+o.left+he.left),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+o.top+he.top)),re.grid.autoHighlight){for(var c=0;c<ye.length;++c){var d=ye[c];d.auto!=t||s&&d.series==s.series&&d.point[0]==s.datapoint[0]&&d.point[1]==s.datapoint[1]||te(d.series,d.point)}s&&Z(s.series,s.datapoint,t)}e.trigger(t,[l,s])}function K(){we||(we=setTimeout($,30))}function $(){we=null,ue.save(),ue.clearRect(0,0,ge,me),ue.translate(he.left,he.top);var t,e;for(t=0;t<ye.length;++t)e=ye[t],e.series.bars.show?ne(e.series,e.point):ie(e.series,e.point);ue.restore(),l(be.drawOverlay,[ue])}function Z(t,e,i){if("number"==typeof t&&(t=ae[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var o=ee(t,e);-1==o?(ye.push({series:t,point:e,auto:i}),K()):i||(ye[o].auto=!1)}function te(t,e){null==t&&null==e&&(ye=[],K()),"number"==typeof t&&(t=ae[t]),"number"==typeof e&&(e=t.data[e]);var i=ee(t,e);-1!=i&&(ye.splice(i,1),K())}function ee(t,e){for(var i=0;i<ye.length;++i){var n=ye[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function ie(e,i){var n=i[0],o=i[1],a=e.xaxis,r=e.yaxis;if(!(n<a.min||n>a.max||o<r.min||o>r.max)){var l=e.points.radius+e.points.lineWidth/2;ue.lineWidth=l,ue.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var s=1.5*l,n=a.p2c(n),o=r.p2c(o);ue.beginPath(),"circle"==e.points.symbol?ue.arc(n,o,s,0,2*Math.PI,!1):e.points.symbol(ue,n,o,s,!1),ue.closePath(),ue.stroke()}}function ne(e,i){ue.lineWidth=e.bars.lineWidth,ue.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var n=t.color.parse(e.color).scale("a",.5).toString(),o="left"==e.bars.align?0:-e.bars.barWidth/2;X(i[0],i[1],i[2]||0,o,o+e.bars.barWidth,0,function(){return n},e.xaxis,e.yaxis,ue,e.bars.horizontal,e.bars.lineWidth)}function oe(e,i,n,o){if("string"==typeof e)return e;for(var a=de.createLinearGradient(0,n,0,i),r=0,l=e.colors.length;l>r;++r){var s=e.colors[r];if("string"!=typeof s){var c=t.color.parse(o);null!=s.brightness&&(c=c.scale("rgb",s.brightness)),null!=s.opacity&&(c.a*=s.opacity),s=c.toString()}a.addColorStop(r/(l-1),s)}return a}var ae=[],re={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},le=null,se=null,ce=null,de=null,ue=null,pe=[],fe=[],he={left:0,right:0,top:0,bottom:0},ge=0,me=0,ve=0,xe=0,be={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ke=this;ke.setData=d,ke.setupGrid=P,ke.draw=N,ke.getPlaceholder=function(){return e},ke.getCanvas=function(){return le},ke.getPlotOffset=function(){return he},ke.width=function(){return ve},ke.height=function(){return xe},ke.offset=function(){var t=ce.offset();return t.left+=he.left,t.top+=he.top,t},ke.getData=function(){return ae},ke.getAxes=function(){var e={};return t.each(pe.concat(fe),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},ke.getXAxes=function(){return pe},ke.getYAxes=function(){return fe},ke.c2p=h,ke.p2c=g,ke.getOptions=function(){return re},ke.highlight=Z,ke.unhighlight=te,ke.triggerRedrawOverlay=K,ke.pointOffset=function(t){return{left:parseInt(pe[p(t,"x")-1].p2c(+t.x)+he.left),top:parseInt(fe[p(t,"y")-1].p2c(+t.y)+he.top)}},ke.shutdown=T,ke.resize=function(){k(),y(le),y(se)},ke.hooks=be,s(ke),c(a),w(),d(o),P(),N(),M();var ye=[],we=null}function n(t,e){return e*Math.floor(t/e)}t.plot=function(i,n,o){var a=new e(t(i),n,o,t.plot.plugins);return a},t.plot.version="0.7",t.plot.plugins=[],t.plot.formatDate=function(t,e,i){var n=function(t){return t=""+t,1==t.length?"0"+t:t},o=[],a=!1,r=!1,l=t.getUTCHours(),s=12>l;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=e.search(/%p|%P/)&&(l>12?l-=12:0==l&&(l=12));for(var c=0;c<e.length;++c){var d=e.charAt(c);if(a){switch(d){case"h":d=""+l;break;case"H":d=n(l);break;case"M":d=n(t.getUTCMinutes());break;case"S":d=n(t.getUTCSeconds());
break;case"d":d=""+t.getUTCDate();break;case"m":d=""+(t.getUTCMonth()+1);break;case"y":d=""+t.getUTCFullYear();break;case"b":d=""+i[t.getUTCMonth()];break;case"p":d=s?"am":"pm";break;case"P":d=s?"AM":"PM";break;case"0":d="",r=!0}d&&r&&(d=n(d),r=!1),o.push(d),r||(a=!1)}else"%"==d?a=!0:o.push(d)}return o.join("")}}(jQuery),function(t){function e(e){function o(t,e){e.series.pie.show&&(e.grid.show=!1,"auto"==e.series.pie.label.show&&(e.series.pie.label.show=e.legend.show?!1:!0),"auto"==e.series.pie.radius&&(e.series.pie.radius=e.series.pie.label.show?.75:1),e.series.pie.tilt>1&&(e.series.pie.tilt=1),e.series.pie.tilt<0&&(e.series.pie.tilt=0),t.hooks.processDatapoints.push(l),t.hooks.drawOverlay.push(M),t.hooks.draw.push(u))}function a(t,e){var i=t.getOptions();i.series.pie.show&&i.grid.hoverable&&e.unbind("mousemove").mousemove(g),i.series.pie.show&&i.grid.clickable&&e.unbind("click").click(m)}function r(t){for(var e=0;e<t.length;++e){var i=parseFloat(t[e].data[0][1]);i&&(P+=i)}}function l(e){N||(N=!0,T=e.getCanvas(),C=t(T).parent(),n=e.getOptions(),e.setData(d(e.getData())))}function s(){W=C.children().filter(".legend").children().width(),S=Math.min(T.width,T.height/n.series.pie.tilt)/2,A=T.height/2+n.series.pie.offset.top,I=T.width/2,"auto"==n.series.pie.offset.left?n.legend.position.match("w")?I+=W/2:I-=W/2:I+=n.series.pie.offset.left,S>I?I=S:I>T.width-S&&(I=T.width-S)}function c(t){for(var e=0;e<t.length;++e)"number"==typeof t[e].data?t[e].data=[[1,t[e].data]]:("undefined"==typeof t[e].data||"undefined"==typeof t[e].data[0])&&("undefined"!=typeof t[e].data&&"undefined"!=typeof t[e].data.label&&(t[e].label=t[e].data.label),t[e].data=[[1,0]]);return t}function d(t){t=c(t),r(t);for(var e=0,i=0,o=n.series.pie.combine.color,a=[],l=0;l<t.length;++l)t[l].data[0][1]=parseFloat(t[l].data[0][1]),t[l].data[0][1]||(t[l].data[0][1]=0),t[l].data[0][1]/P<=n.series.pie.combine.threshold?(e+=t[l].data[0][1],i++,o||(o=t[l].color)):a.push({data:[[1,t[l].data[0][1]]],color:t[l].color,label:t[l].label,angle:2*t[l].data[0][1]*Math.PI/P,percent:t[l].data[0][1]/P*100});return i>0&&a.push({data:[[1,e]],color:o,label:n.series.pie.combine.label,angle:2*e*Math.PI/P,percent:e/P*100}),a}function u(e,i){function o(){ctx.clearRect(0,0,T.width,T.height),C.children().filter(".pieLabel, .pieLabelBackground").remove()}function a(){var t=5,e=15,i=10,o=.02;if(n.series.pie.radius>1)var a=n.series.pie.radius;else var a=S*n.series.pie.radius;if(!(a>=T.width/2-t||a*n.series.pie.tilt>=T.height/2-e||i>=a)){ctx.save(),ctx.translate(t,e),ctx.globalAlpha=o,ctx.fillStyle="#000",ctx.translate(I,A),ctx.scale(1,n.series.pie.tilt);for(var r=1;i>=r;r++)ctx.beginPath(),ctx.arc(0,0,a,0,2*Math.PI,!1),ctx.fill(),a-=r;ctx.restore()}}function r(){function e(e,i,n){0>=e||(n?ctx.fillStyle=i:(ctx.strokeStyle=i,ctx.lineJoin="round"),ctx.beginPath(),Math.abs(e-2*Math.PI)>1e-9?ctx.moveTo(0,0):t.browser.msie&&(e-=1e-4),ctx.arc(0,0,o,a,a+e,!1),ctx.closePath(),a+=e,n?ctx.fill():ctx.stroke())}function i(){function e(e,i,a){if(0!=e.data[0][1]){var r,l=n.legend.labelFormatter,s=n.series.pie.label.formatter;r=l?l(e.label,e):e.label,s&&(r=s(r,e));var c=(i+e.angle+i)/2,d=I+Math.round(Math.cos(c)*o),u=A+Math.round(Math.sin(c)*o)*n.series.pie.tilt,p='<span class="pieLabel" id="pieLabel'+a+'" style="position:absolute;top:'+u+"px;left:"+d+'px;">'+r+"</span>";C.append(p);var f=C.children("#pieLabel"+a),h=u-f.height()/2,g=d-f.width()/2;if(f.css("top",h),f.css("left",g),(0-h>0||0-g>0||T.height-(h+f.height())<0||T.width-(g+f.width())<0)&&(z=!0),0!=n.series.pie.label.background.opacity){var m=n.series.pie.label.background.color;null==m&&(m=e.color);var v="top:"+h+"px;left:"+g+"px;";t('<div class="pieLabelBackground" style="position:absolute;width:'+f.width()+"px;height:"+f.height()+"px;"+v+"background-color:"+m+';"> </div>').insertBefore(f).css("opacity",n.series.pie.label.background.opacity)}}}var i=startAngle;if(n.series.pie.label.radius>1)var o=n.series.pie.label.radius;else var o=S*n.series.pie.label.radius;for(var a=0;a<l.length;++a)l[a].percent>=100*n.series.pie.label.threshold&&e(l[a],i,a),i+=l[a].angle}if(startAngle=Math.PI*n.series.pie.startAngle,n.series.pie.radius>1)var o=n.series.pie.radius;else var o=S*n.series.pie.radius;ctx.save(),ctx.translate(I,A),ctx.scale(1,n.series.pie.tilt),ctx.save();for(var a=startAngle,r=0;r<l.length;++r)l[r].startAngle=a,e(l[r].angle,l[r].color,!0);ctx.restore(),ctx.save(),ctx.lineWidth=n.series.pie.stroke.width,a=startAngle;for(var r=0;r<l.length;++r)e(l[r].angle,n.series.pie.stroke.color,!1);ctx.restore(),p(ctx),n.series.pie.label.show&&i(),ctx.restore()}if(C){ctx=i,s();for(var l=e.getData(),c=0;z&&_>c;)z=!1,c>0&&(S*=O),c+=1,o(),n.series.pie.tilt<=.8&&a(),r();c>=_&&(o(),C.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>')),e.setSeries&&e.insertLegend&&(e.setSeries(l),e.insertLegend())}}function p(t){n.series.pie.innerRadius>0&&(t.save(),innerRadius=n.series.pie.innerRadius>1?n.series.pie.innerRadius:S*n.series.pie.innerRadius,t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle=n.series.pie.stroke.color,t.arc(0,0,innerRadius,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.strokeStyle=n.series.pie.stroke.color,t.arc(0,0,innerRadius,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore())}function f(t,e){for(var i=!1,n=-1,o=t.length,a=o-1;++n<o;a=n)(t[n][1]<=e[1]&&e[1]<t[a][1]||t[a][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[a][0]-t[n][0])*(e[1]-t[n][1])/(t[a][1]-t[n][1])+t[n][0]&&(i=!i);return i}function h(t,i){for(var n=e.getData(),o=e.getOptions(),a=o.series.pie.radius>1?o.series.pie.radius:S*o.series.pie.radius,r=0;r<n.length;++r){var l=n[r];if(l.pie.show){if(ctx.save(),ctx.beginPath(),ctx.moveTo(0,0),ctx.arc(0,0,a,l.startAngle,l.startAngle+l.angle,!1),ctx.closePath(),x=t-I,y=i-A,ctx.isPointInPath){if(ctx.isPointInPath(t-I,i-A))return ctx.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:r}}else if(p1X=a*Math.cos(l.startAngle),p1Y=a*Math.sin(l.startAngle),p2X=a*Math.cos(l.startAngle+l.angle/4),p2Y=a*Math.sin(l.startAngle+l.angle/4),p3X=a*Math.cos(l.startAngle+l.angle/2),p3Y=a*Math.sin(l.startAngle+l.angle/2),p4X=a*Math.cos(l.startAngle+l.angle/1.5),p4Y=a*Math.sin(l.startAngle+l.angle/1.5),p5X=a*Math.cos(l.startAngle+l.angle),p5Y=a*Math.sin(l.startAngle+l.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y],f(arrPoly,arrPoint))return ctx.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:r};ctx.restore()}}return null}function g(t){v("plothover",t)}function m(t){v("plotclick",t)}function v(t,i){var o=e.offset(),a=parseInt(i.pageX-o.left),r=parseInt(i.pageY-o.top),l=h(a,r);if(n.grid.autoHighlight)for(var s=0;s<F.length;++s){var c=F[s];c.auto!=t||l&&c.series==l.series||k(c.series)}l&&b(l.series,t);var d={pageX:i.pageX,pageY:i.pageY};C.trigger(t,[d,l])}function b(t,i){"number"==typeof t&&(t=series[t]);var n=w(t);-1==n?(F.push({series:t,auto:i}),e.triggerRedrawOverlay()):i||(F[n].auto=!1)}function k(t){null==t&&(F=[],e.triggerRedrawOverlay()),"number"==typeof t&&(t=series[t]);var i=w(t);-1!=i&&(F.splice(i,1),e.triggerRedrawOverlay())}function w(t){for(var e=0;e<F.length;++e){var i=F[e];if(i.series==t)return e}return-1}function M(t,e){function n(t){t.angle<0||(e.fillStyle="rgba(255, 255, 255, "+o.series.pie.highlight.opacity+")",e.beginPath(),Math.abs(t.angle-2*Math.PI)>1e-9&&e.moveTo(0,0),e.arc(0,0,a,t.startAngle,t.startAngle+t.angle,!1),e.closePath(),e.fill())}var o=t.getOptions(),a=o.series.pie.radius>1?o.series.pie.radius:S*o.series.pie.radius;for(e.save(),e.translate(I,A),e.scale(1,o.series.pie.tilt),i=0;i<F.length;++i)n(F[i].series);p(e),e.restore()}var T=null,C=null,S=null,I=null,A=null,P=0,z=!0,_=10,O=.95,W=0,N=!1,F=[];e.hooks.processOptions.push(o),e.hooks.bindEvents.push(a)}var n={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,offset:{top:0,left:"auto"},stroke:{color:"#FFF",width:1},label:{show:"auto",formatter:function(t,e){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+e.color+';">'+t+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};t.plot.plugins.push({init:e,options:n,name:"pie",version:"1.0"})}(jQuery),function(t){function e(e,n,o){var r=e.attr("id"),l=t("input#"+r+"-score"),u=e.children("img."+r);e.mouseleave(function(){s(e,l.val(),n),i(o,l,n)}),u.bind(n.half?"mousemove":"mouseover",function(i){if(a(r,this.alt,n),n.half){var l=parseFloat(((i.pageX-t(this).offset().left)/n.size).toFixed(1));l=l>=0&&.5>l?.5:1,e.data("score",parseFloat(this.alt)+l-1),d(e,e.data("score"),n)}else a(r,this.alt,n);c(o,this.alt,n)}).click(function(t){l.val(n.half?e.data("score"):this.alt),n.click&&n.click.apply(e,[l.val(),t])})}function i(t,e,i){if(null!==t){var n="";i.targetKeep&&(n=e.val(),"hint"==i.targetType&&(n=""==e.val()&&i.cancel?i.cancelHint:i.hintList[Math.ceil(e.val())-1])),l(t)?t.val(n):t.html(n)}}function n(e,i,n){var a=void 0;if(void 0==i)return void o("Specify an ID or class to be the target of the action.");if(i){if(i.indexOf(".")>=0){var r;return t(i).each(function(){r="#"+t(this).attr("id"),"start"==n?t.fn.raty.start(e,r):"click"==n?t.fn.raty.click(e,r):"readOnly"==n&&t.fn.raty.readOnly(e,r)})}if(a=t(i),!a.length)return void o('"'+i+'" is a invalid identifier for the public funtion $.fn.raty.'+n+"().")}return a}function o(t){window.console&&window.console.log&&window.console.log(t)}function a(e,i,n){for(var o,a,r=t("img."+e).length,l=0,s=0,c=1;r>=c;c++)o=t("img#"+e+"-"+c),i>=c?n.iconRange&&n.iconRange.length>l?(a=n.iconRange[l][0],s=n.iconRange[l][1],s>=c&&o.attr("src",n.path+a),c==s&&l++):o.attr("src",n.path+n.starOn):o.attr("src",n.path+n.starOff)}function r(t,e,i){0!=e?(e=parseInt(e),hint=e>0&&i.number<=i.hintList.length&&null!==i.hintList[e-1]?i.hintList[e-1]:e):hint=i.noRatedMsg,t.attr("title",hint).children("img").attr("title",hint)}function l(t){return t.is("input")||t.is("select")||t.is("textarea")}function s(e,i,n){var o=e.attr("id");return isNaN(parseInt(i))?(e.children("img."+o).attr("src",n.path+n.starOff),void t("input#"+o+"-score").removeAttr("value")):(0>i?i=0:i>n.number&&(i=n.number),a(o,i,n),i>0&&(t("input#"+o+"-score").val(i),n.half&&d(e,i,n)),void((n.readOnly||"default"==e.css("cursor"))&&r(e,i,n)))}function c(t,e,i){if(null!==t){var n=e;"hint"==i.targetType&&(n=0==e&&i.cancel?i.cancelHint:i.hintList[e-1]),l(t)?t.val(n):t.html(n)}}function d(e,i,n){var o=e.attr("id"),a=Math.ceil(i),r=(a-i).toFixed(1);r>.25&&.75>=r?(a-=.5,t("img#"+o+"-"+Math.ceil(a)).attr("src",n.path+n.starHalf)):r>.75?a--:t("img#"+o+"-"+a).attr("src",n.path+n.starOn)}t.fn.raty=function(i){if(0==this.length)return void o("Selector invalid or missing!");if(this.length>1)return this.each(function(){t.fn.raty.apply(t(this),[i])});var n=t.extend({},t.fn.raty.defaults,i),l=t(this),s=this.attr("id"),u=0,p=n.starOn,f="",h=n.target,g=n.width?n.width:n.number*n.size+4*n.number;void 0===s&&(s="raty-"+l.index(),l.attr("id",s)),n.number>20?n.number=20:n.number<0&&(n.number=0),"/"!=n.path.substring(n.path.length-1,n.path.length)&&(n.path+="/"),l.data("options",n),!isNaN(parseInt(n.start))&&n.start>0&&(u=n.start>n.number?n.number:n.start);for(var m=1;m<=n.number;m++)p=u>=m?n.starOn:n.starOff,f=m<=n.hintList.length&&null!==n.hintList[m-1]?n.hintList[m-1]:m,l.append('<img id="'+s+"-"+m+'" src="'+n.path+p+'" alt="'+m+'" title="'+f+'" class="'+s+'"/>').append(m<n.number?"&nbsp;":"");n.iconRange&&u>0&&a(s,u,n);var v=t("<input/>",{id:s+"-score",type:"hidden",name:n.scoreName}).appendTo(l);if(u>0&&v.val(u),n.half&&d(l,t("input#"+s+"-score").val(),n),n.readOnly)l.css("cursor","default"),r(l,u,n);else{if(null!==h&&(h=t(h),0==h.length&&o("Target selector invalid or missing!")),n.cancel){var x=t("img."+s),b='<img src="'+n.path+n.cancelOff+'" alt="x" title="'+n.cancelHint+'" class="button-cancel"/>';"left"==n.cancelPlace?l.prepend(b+"&nbsp;"):l.append("&nbsp;").append(b),t("#"+s+" img.button-cancel").mouseenter(function(){t(this).attr("src",n.path+n.cancelOn),x.attr("src",n.path+n.starOff),c(h,"",n)}).mouseleave(function(){t(this).attr("src",n.path+n.cancelOff),l.mouseout()}).click(function(e){t("input#"+s+"-score").removeAttr("value"),n.click&&n.click.apply(l,[null,e])}),l.css("width",g+n.size+4)}else l.css("width",g);l.css("cursor","pointer"),e(l,n,h)}return l},t.fn.raty.cancel=function(e,i){var n=void 0===i?!1:!0;return n?t.fn.raty.click("",e,"cancel"):t.fn.raty.start("",e,"cancel"),t.fn.raty},t.fn.raty.click=function(e,i){var a=n(e,i,"click"),r=t(i).data("options");return s(a,e,r),r.click?r.click.apply(a,[e]):o('You must add the "click: function(score, evt) { }" callback.'),t.fn.raty},t.fn.raty.readOnly=function(i,o){var a=n(i,o,"readOnly"),r=t(o).data("options"),l=a.children("img.button-cancel");return l[0]&&(i?l.hide():l.show()),i?(t("img."+a.attr("id")).unbind(),a.css("cursor","default").unbind()):(e(a,r),a.css("cursor","pointer")),t.fn.raty},t.fn.raty.start=function(e,i){var o=n(e,i,"start"),a=t(i).data("options");return s(o,e,a),t.fn.raty},t.fn.raty.defaults={cancel:!1,cancelHint:"cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:null,half:!1,hintList:["bad","poor","regular","good","gorgeous"],noRatedMsg:"not rated yet",number:5,path:"img/",iconRange:[],readOnly:!1,scoreName:"score",size:16,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",start:0,target:null,targetKeep:!1,targetType:"hint",width:null}}(jQuery),/*!
 * jQuery Tools v1.2.6 - The missing UI library for the Web
 * 
 * tooltip/tooltip.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
function(t){function e(e,i,n){var o=n.relative?e.position().top:e.offset().top,a=n.relative?e.position().left:e.offset().left,r=n.position[0];o-=i.outerHeight()-n.offset[0],a+=e.outerWidth()+n.offset[1],/iPad/i.test(navigator.userAgent)&&(o-=t(window).scrollTop());var l=i.outerHeight()+e.outerHeight();"center"==r&&(o+=l/2),"bottom"==r&&(o+=l),r=n.position[1];var s=i.outerWidth()+e.outerWidth();return"center"==r&&(a-=s/2),"left"==r&&(a-=s),{top:o,left:a}}function i(i,o){var a,r,l=this,s=i.add(l),c=0,d=0,u=i.attr("title"),p=i.attr("data-tooltip"),f=n[o.effect],h=i.is(":input"),g=h&&i.is(":checkbox, :radio, select, :button, :submit"),m=i.attr("type"),v=o.events[m]||o.events[h?g?"widget":"input":"def"];if(!f)throw'Nonexistent effect "'+o.effect+'"';if(v=v.split(/,\s*/),2!=v.length)throw"Tooltip: bad events configuration for "+m;i.bind(v[0],function(t){clearTimeout(c),o.predelay?d=setTimeout(function(){l.show(t)},o.predelay):l.show(t)}).bind(v[1],function(t){clearTimeout(d),o.delay?c=setTimeout(function(){l.hide(t)},o.delay):l.hide(t)}),u&&o.cancelDefault&&(i.removeAttr("title"),i.data("title",u)),t.extend(l,{show:function(n){if(!a&&(p?a=t(p):o.tip?a=t(o.tip).eq(0):u?a=t(o.layout).addClass(o.tipClass).appendTo(document.body).hide().append(u):(a=i.next(),a.length||(a=i.parent().next())),!a.length))throw"Cannot find tooltip for "+i;if(l.isShown())return l;a.stop(!0,!0);var h=e(i,a,o);if(o.tip&&a.html(i.data("title")),n=t.Event(),n.type="onBeforeShow",s.trigger(n,[h]),n.isDefaultPrevented())return l;h=e(i,a,o),a.css({position:"absolute",top:h.top,left:h.left}),r=!0,f[0].call(l,function(){n.type="onShow",r="full",s.trigger(n)});var g=o.events.tooltip.split(/,\s*/);return a.data("__set")||(a.unbind(g[0]).bind(g[0],function(){clearTimeout(c),clearTimeout(d)}),g[1]&&!i.is("input:not(:checkbox, :radio), textarea")&&a.unbind(g[1]).bind(g[1],function(t){t.relatedTarget!=i[0]&&i.trigger(v[1].split(" ")[0])}),o.tip||a.data("__set",!0)),l},hide:function(e){return a&&l.isShown()?(e=t.Event(),e.type="onBeforeHide",s.trigger(e),e.isDefaultPrevented()?void 0:(r=!1,n[o.effect][1].call(l,function(){e.type="onHide",s.trigger(e)}),l)):l},isShown:function(t){return t?"full"==r:r},getConf:function(){return o},getTip:function(){return a},getTrigger:function(){return i}}),t.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(e,i){t.isFunction(o[i])&&t(l).bind(i,o[i]),l[i]=function(e){return e&&t(l).bind(i,e),l}})}t.tools=t.tools||{version:"v1.2.6"},t.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(t,e,i){n[t]=[e,i]}};var n={toggle:[function(t){var e=this.getConf(),i=this.getTip(),n=e.opacity;1>n&&i.css({opacity:n}),i.show(),t.call()},function(t){this.getTip().hide(),t.call()}],fade:[function(e){var i=this.getConf();!t.browser.msie||i.fadeIE?this.getTip().fadeTo(i.fadeInSpeed,i.opacity,e):(this.getTip().show(),e())},function(e){var i=this.getConf();!t.browser.msie||i.fadeIE?this.getTip().fadeOut(i.fadeOutSpeed,e):(this.getTip().hide(),e())}]};t.fn.tooltip=function(e){var n=this.data("tooltip");return n?n:(e=t.extend(!0,{},t.tools.tooltip.conf,e),"string"==typeof e.position&&(e.position=e.position.split(/,?\s/)),this.each(function(){n=new i(t(this),e),t(this).data("tooltip",n)}),e.api?n:this)}}(jQuery),function(t){var e=function(){var e=65,i='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',n={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},o=function(e,i){var n=H(e);t(i).data("colorpicker").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},a=function(e,i){t(i).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},r=function(e,i){t(i).data("colorpicker").fields.eq(0).val(U(e)).end()},l=function(e,i){t(i).data("colorpicker").selector.css("backgroundColor","#"+U({h:e.h,s:100,b:100})),t(i).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},s=function(e,i){t(i).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},c=function(e,i){t(i).data("colorpicker").currentColor.css("backgroundColor","#"+U(e))},d=function(e,i){t(i).data("colorpicker").newColor.css("backgroundColor","#"+U(e))},u=function(i){var n=i.charCode||i.keyCode||-1;if(n>e&&90>=n||32==n)return!1;var o=t(this).parent().parent();o.data("colorpicker").livePreview===!0&&p.apply(this)},p=function(e){var i,n=t(this).parent().parent();n.data("colorpicker").color=i=this.parentNode.className.indexOf("_hex")>0?F(W(this.value)):this.parentNode.className.indexOf("_hsb")>0?_({h:parseInt(n.data("colorpicker").fields.eq(4).val(),10),s:parseInt(n.data("colorpicker").fields.eq(5).val(),10),b:parseInt(n.data("colorpicker").fields.eq(6).val(),10)}):L(O({r:parseInt(n.data("colorpicker").fields.eq(1).val(),10),g:parseInt(n.data("colorpicker").fields.eq(2).val(),10),b:parseInt(n.data("colorpicker").fields.eq(3).val(),10)})),e&&(o(i,n.get(0)),r(i,n.get(0)),a(i,n.get(0))),l(i,n.get(0)),s(i,n.get(0)),d(i,n.get(0)),n.data("colorpicker").onChange.apply(n,[i,U(i),H(i)])},f=function(){var e=t(this).parent().parent();e.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},h=function(){e=this.parentNode.className.indexOf("_hex")>0?70:65,t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),t(this).parent().addClass("colorpicker_focus")},g=function(e){var i=t(this).parent().find("input").focus(),n={el:t(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:i,val:parseInt(i.val(),10),preview:t(this).parent().parent().data("colorpicker").livePreview};t(document).bind("mouseup",n,v),t(document).bind("mousemove",n,m)},m=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10)))),t.data.preview&&p.apply(t.data.field.get(0),[!0]),!1},v=function(e){return p.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),t(document).unbind("mouseup",v),t(document).unbind("mousemove",m),!1},x=function(){var e={cal:t(this).parent(),y:t(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,t(document).bind("mouseup",e,k),t(document).bind("mousemove",e,b)},b=function(t){return p.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]),!1},k=function(e){return o(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),r(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),t(document).unbind("mouseup",k),t(document).unbind("mousemove",b),!1},y=function(){var e={cal:t(this).parent(),pos:t(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,t(document).bind("mouseup",e,M),t(document).bind("mousemove",e,w)},w=function(t){return p.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]),!1},M=function(e){return o(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),r(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),t(document).unbind("mouseup",M),t(document).unbind("mousemove",w),!1},T=function(){t(this).addClass("colorpicker_focus")},C=function(){t(this).removeClass("colorpicker_focus")},S=function(){var e=t(this).parent(),i=e.data("colorpicker").color;e.data("colorpicker").origColor=i,c(i,e.get(0)),e.data("colorpicker").onSubmit(i,U(i),H(i),e.data("colorpicker").el)},I=function(){var e=t("#"+t(this).data("colorpickerId"));e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]);var i=t(this).offset(),n=z(),o=i.top+this.offsetHeight,a=i.left;return o+176>n.t+n.h&&(o-=this.offsetHeight+176),a+356>n.l+n.w&&(a-=356),e.css({left:a+"px",top:o+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),t(document).bind("mousedown",{cal:e},A),!1},A=function(e){P(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t(document).unbind("mousedown",A))},P=function(t,e,i){if(t==e)return!0;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var n=e.parentNode;n&&n!=i;){if(n==t)return!0;n=n.parentNode}return!1},z=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},_=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},O=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},W=function(t){var e=6-t.length;if(e>0){for(var i=[],n=0;e>n;n++)i.push("0");i.push(t),t=i.join("")}return t},N=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(65280&t)>>8,b:255&t}},F=function(t){return L(N(t))},L=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),o=n-i;return e.b=n,e.s=0!=n?255*o/n:0,e.h=0!=e.s?t.r==n?(t.g-t.b)/o:t.g==n?2+(t.b-t.r)/o:4+(t.r-t.g)/o:-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},H=function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0==n)e.r=e.g=e.b=o;else{var a=o,r=(255-n)*o/255,l=(a-r)*(i%60)/60;360==i&&(i=0),60>i?(e.r=a,e.b=r,e.g=r+l):120>i?(e.g=a,e.b=r,e.r=a-l):180>i?(e.g=a,e.r=r,e.b=r+l):240>i?(e.b=a,e.r=r,e.g=a-l):300>i?(e.b=a,e.g=r,e.r=r+l):360>i?(e.r=a,e.g=r,e.b=a-l):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},D=function(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1==e.length&&(i[t]="0"+e)}),i.join("")},U=function(t){return D(H(t))},R=function(){var e=t(this).parent(),i=e.data("colorpicker").origColor;e.data("colorpicker").color=i,o(i,e.get(0)),r(i,e.get(0)),a(i,e.get(0)),l(i,e.get(0)),s(i,e.get(0)),d(i,e.get(0))};return{init:function(e){if(e=t.extend({},n,e||{}),"string"==typeof e.color)e.color=F(e.color);else if(void 0!=e.color.r&&void 0!=e.color.g&&void 0!=e.color.b)e.color=L(e.color);else{if(void 0==e.color.h||void 0==e.color.s||void 0==e.color.b)return this;e.color=_(e.color)}return this.each(function(){if(!t(this).data("colorpickerId")){var n=t.extend({},e);n.origColor=e.color;var m="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colorpickerId",m);var v=t(i).attr("id",m);n.flat?v.appendTo(this).show():v.appendTo(document.body),n.fields=v.find("input").bind("keyup",u).bind("change",p).bind("blur",f).bind("focus",h),v.find("span").bind("mousedown",g).end().find(">div.colorpicker_current_color").bind("click",R),n.selector=v.find("div.colorpicker_color").bind("mousedown",y),n.selectorIndic=n.selector.find("div div"),n.el=this,n.hue=v.find("div.colorpicker_hue div"),v.find("div.colorpicker_hue").bind("mousedown",x),n.newColor=v.find("div.colorpicker_new_color"),n.currentColor=v.find("div.colorpicker_current_color"),v.data("colorpicker",n),v.find("div.colorpicker_submit").bind("mouseenter",T).bind("mouseleave",C).bind("click",S),o(n.color,v.get(0)),a(n.color,v.get(0)),r(n.color,v.get(0)),s(n.color,v.get(0)),l(n.color,v.get(0)),c(n.color,v.get(0)),d(n.color,v.get(0)),n.flat?v.css({position:"relative",display:"block"}):t(this).bind(n.eventName,I)}})},showPicker:function(){return this.each(function(){t(this).data("colorpickerId")&&I.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colorpickerId")&&t("#"+t(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=F(e);else if(void 0!=e.r&&void 0!=e.g&&void 0!=e.b)e=L(e);else{if(void 0==e.h||void 0==e.s||void 0==e.b)return this;e=_(e)}return this.each(function(){if(t(this).data("colorpickerId")){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").color=e,i.data("colorpicker").origColor=e,o(e,i.get(0)),a(e,i.get(0)),r(e,i.get(0)),s(e,i.get(0)),l(e,i.get(0)),c(e,i.get(0)),d(e,i.get(0))}})}}}();t.fn.extend({ColorPicker:e.init,ColorPickerHide:e.hidePicker,ColorPickerShow:e.showPicker,ColorPickerSetColor:e.setColor})}(jQuery);